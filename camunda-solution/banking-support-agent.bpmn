<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_04o12p6" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.40.0-rc.1" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.8.0">
  <bpmn:process id="banking-support-agent" isExecutable="true">
    <bpmn:adHocSubProcess id="AI_CustomerSupportAgent" name="Customer Support Agent" zeebe:modelerTemplate="io.camunda.connectors.agenticai.aiagent.jobworker.v1" zeebe:modelerTemplateVersion="3" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNBNTZFRkYiLz4KPG1hc2sgaWQ9InBhdGgtMi1vdXRzaWRlLTFfMTg1XzYiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjQiIHk9IjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iYmxhY2siPgo8cmVjdCBmaWxsPSJ3aGl0ZSIgeD0iNCIgeT0iNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIvPgo8L21hc2s+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuMDEwNSAxMi4wOTg3QzE4LjQ5IDEwLjU4OTQgMTcuMTU5NCA4LjEwODE0IDE2LjE3OTkgNi4wMTEwM0MxNi4xNTIgNi4wMDQ1MSAxNi4xMTc2IDYgMTYuMDc5NCA2QzE2LjA0MTEgNiAxNi4wMDY2IDYuMDA0NTEgMTUuOTc4OCA2LjAxMTA0QzE0Ljk5OTQgOC4xMDgxNCAxMy42Njk3IDEwLjU4ODkgMTIuMTQ4MSAxMi4wOTgxQzEwLjYyNjkgMTMuNjA3MSA4LjEyNTY4IDE0LjkyNjQgNi4wMTE1NyAxNS44OTgxQzYuMDA0NzQgMTUuOTI2MSA2IDE1Ljk2MTEgNiAxNkM2IDE2LjAzODcgNi4wMDQ2OCAxNi4wNzM2IDYuMDExNDQgMTYuMTAxNEM4LjEyNTE5IDE3LjA3MjkgMTAuNjI2MiAxOC4zOTE5IDEyLjE0NzcgMTkuOTAxNkMxMy42Njk3IDIxLjQxMDcgMTQuOTk5NiAyMy44OTIgMTUuOTc5MSAyNS45ODlDMTYuMDA2OCAyNS45OTU2IDE2LjA0MTEgMjYgMTYuMDc5MyAyNkMxNi4xMTc1IDI2IDE2LjE1MTkgMjUuOTk1NCAxNi4xNzk2IDI1Ljk4OUMxNy4xNTkxIDIzLjg5MiAxOC40ODg4IDIxLjQxMSAyMC4wMDk5IDE5LjkwMjFNMjAuMDA5OSAxOS45MDIxQzIxLjUyNTMgMTguMzk4NyAyMy45NDY1IDE3LjA2NjkgMjUuOTkxNSAxNi4wODI0QzI1Ljk5NjUgMTYuMDU5MyAyNiAxNi4wMzEgMjYgMTUuOTk5N0MyNiAxNS45Njg0IDI1Ljk5NjUgMTUuOTQwMyAyNS45OTE1IDE1LjkxNzFDMjMuOTQ3NCAxNC45MzI3IDIxLjUyNTkgMTMuNjAxIDIwLjAxMDUgMTIuMDk4NyIgZmlsbD0id2hpdGUiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yMC4wMTA1IDEyLjA5ODdDMTguNDkgMTAuNTg5NCAxNy4xNTk0IDguMTA4MTQgMTYuMTc5OSA2LjAxMTAzQzE2LjE1MiA2LjAwNDUxIDE2LjExNzYgNiAxNi4wNzk0IDZDMTYuMDQxMSA2IDE2LjAwNjYgNi4wMDQ1MSAxNS45Nzg4IDYuMDExMDRDMTQuOTk5NCA4LjEwODE0IDEzLjY2OTcgMTAuNTg4OSAxMi4xNDgxIDEyLjA5ODFDMTAuNjI2OSAxMy42MDcxIDguMTI1NjggMTQuOTI2NCA2LjAxMTU3IDE1Ljg5ODFDNi4wMDQ3NCAxNS45MjYxIDYgMTUuOTYxMSA2IDE2QzYgMTYuMDM4NyA2LjAwNDY4IDE2LjA3MzYgNi4wMTE0NCAxNi4xMDE0QzguMTI1MTkgMTcuMDcyOSAxMC42MjYyIDE4LjM5MTkgMTIuMTQ3NyAxOS45MDE2QzEzLjY2OTcgMjEuNDEwNyAxNC45OTk2IDIzLjg5MiAxNS45NzkxIDI1Ljk4OUMxNi4wMDY4IDI1Ljk5NTYgMTYuMDQxMSAyNiAxNi4wNzkzIDI2QzE2LjExNzUgMjYgMTYuMTUxOSAyNS45OTU0IDE2LjE3OTYgMjUuOTg5QzE3LjE1OTEgMjMuODkyIDE4LjQ4ODggMjEuNDExIDIwLjAwOTkgMTkuOTAyMU0yMC4wMDk5IDE5LjkwMjFDMjEuNTI1MyAxOC4zOTg3IDIzLjk0NjUgMTcuMDY2OSAyNS45OTE1IDE2LjA4MjRDMjUuOTk2NSAxNi4wNTkzIDI2IDE2LjAzMSAyNiAxNS45OTk3QzI2IDE1Ljk2ODQgMjUuOTk2NSAxNS45NDAzIDI1Ljk5MTUgMTUuOTE3MUMyMy45NDc0IDE0LjkzMjcgMjEuNTI1OSAxMy42MDEgMjAuMDEwNSAxMi4wOTg3IiBzdHJva2U9IiM0OTFEOEIiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgbWFzaz0idXJsKCNwYXRoLTItb3V0c2lkZS0xXzE4NV82KSIvPgo8L3N2Zz4K">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda.agenticai:aiagent-job-worker:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input target="toolCallResults" />
          <zeebe:input source="bedrock" target="provider.type" />
          <zeebe:input source="us-east-1" target="provider.bedrock.region" />
          <zeebe:input source="credentials" target="provider.bedrock.authentication.type" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_ACCESS_KEY}}" target="provider.bedrock.authentication.accessKey" />
          <zeebe:input source="{{secrets.AWS_BEDROCK_SECRET_KEY}}" target="provider.bedrock.authentication.secretKey" />
          <zeebe:input source="anthropic.claude-3-5-sonnet-20240620-v1:0" target="provider.bedrock.model.model" />
          <zeebe:input source="=5000" target="provider.bedrock.model.parameters.maxTokens" />
          <zeebe:input source="=0.2" target="provider.bedrock.model.parameters.temperature" />
          <zeebe:input source="=0.1" target="provider.bedrock.model.parameters.topP" />
          <zeebe:input source="=&#34;You are the routing agent for Camunda Bank’s shared inbox (info@democompany.com). Your job: read each inbound requests, split into sub-inquiries if needed, and invoke the correct tool(s). &#10;&#10;CRITICAL OUTPUT RULES&#10;- When you choose a tool, you MUST invoke it via the model’s tool/function calling interface.&#10;- Do NOT print JSON for tool calls in the message content. Do NOT wrap outputs in code fences.&#10;- Keep the assistant text brief; prefer calling tools. Only write text when no tool fits or after tools have run.&#10;- Sub agents (CallActivity_LoanSupportAgent, CallActivity_AccountSupportAgent) are considered to already inform the customer on themselves. All other tools do not inform the customer on itself, make sure to inform the customer about the resolution via Tool_InformCustomer. &#10;&#10;TOOL SELECTION&#10;- Inspect the available tools for every sub-inquiry.&#10;- Choose the best tool; call multiple tools if needed.&#10;- If none fit, call UserTask_HandleOtherInquiries.&#10;- If even that cannot resolve it, reply with: ERROR: Unable to resolve (reason).&#10;&#10;PRIVACY&#10;- Treat the sender as a customer. Never invent PII.&#10;- Treat the customer as authenticated.&#10;&#10;STYLE&#10;- No chain-of-thought, no XML tags, no internal notes in content.&#10;- Your content should be either:&#10;  - a short confirmation, or&#10;  - the final answer when no tool is needed.&#34;" target="data.systemPrompt.prompt" />
          <zeebe:input source="=supportCase.request" target="data.userPrompt.prompt" />
          <zeebe:input source="=agent.context" target="agentContext" />
          <zeebe:input source="camunda-document" target="data.memory.storage.type" />
          <zeebe:input source="=20" target="data.memory.contextWindowSize" />
          <zeebe:input source="=10" target="data.limits.maxModelCalls" />
          <zeebe:input source="WAIT_FOR_TOOL_CALL_RESULTS" target="data.events.behavior" />
          <zeebe:input source="text" target="data.response.format.type" />
          <zeebe:input source="=false" target="data.response.format.parseJson" />
          <zeebe:input source="=true" target="data.response.includeAssistantMessage" />
          <zeebe:input source="=true" target="data.response.includeAgentContext" />
          <zeebe:output source="=agent" target="agentResult" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="elementTemplateVersion" value="3" />
          <zeebe:header key="elementTemplateId" value="io.camunda.connectors.agenticai.aiagent.jobworker.v1" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
        <zeebe:adHoc outputCollection="toolCallResults" outputElement="={&#10;  id: toolCall._meta.id,&#10;  name: toolCall._meta.name,&#10;  content: toolCallResult&#10;}" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0fv4284</bpmn:incoming>
      <bpmn:incoming>Flow_09odqrt</bpmn:incoming>
      <bpmn:outgoing>Flow_1nojswc</bpmn:outgoing>
      <bpmn:callActivity id="CallActivity_AccountSupportAgent" name="Account Support Agent">
        <bpmn:documentation>Handle all account related inquiries</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:calledElement processId="account-support-agent" propagateAllChildVariables="false" propagateAllParentVariables="false" />
          <zeebe:ioMapping>
            <zeebe:input source="=put(supportCase, &#34;request&#34;, fromAi(toolCall.userInquiry, &#34;The relevant user request as extracted from the email for this agent using the original customer wording&#34;))" target="supportCase" />
            <zeebe:output source="=response" target="toolCallResult" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
      </bpmn:callActivity>
      <bpmn:callActivity id="CallActivity_LoanSupportAgent" name="Loan Support Agent">
        <bpmn:extensionElements>
          <zeebe:calledElement processId="loan-support-agent" propagateAllChildVariables="false" propagateAllParentVariables="false" />
          <zeebe:ioMapping>
            <zeebe:input source="=put(supportCase, &#34;request&#34;, fromAi(toolCall.userInquiry, &#34;The relevant user request as extracted from the email for this agent using the original customer wording&#34;))" target="supportCase" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
      </bpmn:callActivity>
      <bpmn:userTask id="UserTask_HandleLegalQuestions" name="Handle legal questions">
        <bpmn:extensionElements>
          <zeebe:userTask />
          <zeebe:formDefinition formId="Form_HumanHandling" />
          <zeebe:ioMapping>
            <zeebe:input source="=fromAi(toolCall.requestToHuman, &#34;Describe what the specialist needs to do for the customer. Summarize in your own words - ideally easy to get bullet points, but attach the original customer request below for reference&#34;, &#34;string&#34;)" target="requestDetails" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
      </bpmn:userTask>
      <bpmn:userTask id="UserTask_HandleOtherInquiries" name="Handle other inquiries">
        <bpmn:extensionElements>
          <zeebe:userTask />
          <zeebe:formDefinition formId="Form_HumanHandling" />
        </bpmn:extensionElements>
      </bpmn:userTask>
      <bpmn:serviceTask id="Tool_A2A_CreditCardAgent" name="Card Support Agent&#10;(A2A Client)" zeebe:modelerTemplate="dev.example.a2a.connector.outbound" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTIwMHB0IiBoZWlnaHQ9IjEyMDBwdCIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMTIwMCAxMjAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogPHBhdGggZD0ibTEwMjAgMzExLjQ4Yy03Mi41MTYgMC0xMzEuNDgtNTkuMDE2LTEzMS40OC0xMzEuNDggMC0xMy41LTExLjAxNi0yNC45ODQtMjQuOTg0LTI0Ljk4NC0xMy41IDAtMjQuOTg0IDExLjQ4NC0yNC45ODQgMjQuOTg0IDAgOC40ODQ0LTAuOTg0MzggMTcuMDE2LTIuNDg0NCAyNC45ODQtMC41MTU2MiAzLjk4NDQtMS41IDguMDE1Ni0zIDEyLTAuOTg0MzggMy45ODQ0LTIuNDg0NCA4LjAxNTYtMy45ODQ0IDExLjQ4NC02IDE1Ljk4NC0xNS41MTYgMzAuNTE2LTI3IDQyLjUxNi0xMi41MTYgMTMuNS0yNy45ODQgMjQtNDUuNTE2IDMwLjk4NC0zIDEuNS02LjUxNTYgMi40ODQ0LTkuOTg0NCAzLjUxNTYtMS41IDAuNTE1NjItMyAwLjk4NDM4LTQuNSAxLjUtNi41MTU2IDIuMDE1Ni0xMy41IDMtMjEgMy45ODQ0LTQuNSAwLjUxNTYyLTkgMC41MTU2Mi0xMy41IDAuNTE1NjItMTQuMDE2IDAtMjQuOTg0IDExLjAxNi0yNC45ODQgMjQuOTg0IDAgMTMuNSAxMS4wMTYgMjQuOTg0IDI0Ljk4NCAyNC45ODQgNzIuNTE2IDAgMTMxLjAyIDU4LjUgMTMxLjAyIDEzMS4wMiAwIDE0LjAxNiAxMS40ODQgMjQuOTg0IDI0Ljk4NCAyNC45ODQgMTQuMDE2IDAgMjQuOTg0LTExLjAxNiAyNC45ODQtMjQuOTg0IDAtNC41IDAtOSAwLjUxNTYyLTEzLjUgMC45ODQzOC03LjUgMi4wMTU2LTE0LjQ4NCAzLjk4NDQtMjEgMC41MTU2Mi0xLjUgMC45ODQzOC0zIDEuNS00LjUgMC45ODQzOC0zLjUxNTYgMi4wMTU2LTYuOTg0NCAzLjk4NDQtOS45ODQ0IDYuNTE1Ni0xNy40ODQgMTcuMDE2LTMzIDMwLjUxNi00NS41MTYgMTItMTEuNDg0IDI2LjQ4NC0yMSA0Mi41MTYtMjcgMy41MTU2LTEuNSA3LjUtMyAxMS40ODQtMy45ODQ0IDMuOTg0NC0xLjUgOC4wMTU2LTIuNDg0NCAxMi0zIDguMDE1Ni0xLjUgMTYuNS0yLjQ4NDQgMjQuOTg0LTIuNDg0NCAxMy41IDAgMjQuOTg0LTExLjQ4NCAyNC45ODQtMjQuOTg0LTAuMDQ2ODc1LTE0LjAxNi0xMS41MzEtMjUuMDMxLTI1LjAzMS0yNS4wMzF6IiBmaWxsPSIjNGMyNWUwIi8+CiA8cGF0aCBkPSJtOTU0IDQ0NS41Yy05Ljk4NDQgMTMuNS0xNS41MTYgMjkuNDg0LTE1LjUxNiA0Ny4wMTYgMCA0MS40ODQtMzMuNTE2IDc1LTc1IDc1LTQxLjAxNiAwLTc1LTMzLjUxNi03NS03NSAwLTQ0LjQ4NC0zNi41MTYtODEtODEtODEtNDEuNDg0IDAtNzUtMzMuOTg0LTc1LTc1IDAtNDEuNDg0IDMzLjUxNi03NSA3NS03NSAxNy40ODQgMCAzMy41MTYtNS40ODQ0IDQ3LjAxNi0xNS41MTYgMTQuMDE2LTkuOTg0NCAyNC45ODQtMjQuNTE2IDMwLTQxLjQ4NC01Ni4wMTYtMjYuNTMxLTExOC41LTQxLjAxNi0xODQuNS00MS4wMTYtMjQwLjUyIDAtNDM2LjUgMTk1Ljk4LTQzNi41IDQzNi41czE5NS45OCA0MzYuNSA0MzYuNSA0MzYuNSA0MzYuNS0xOTUuOTggNDM2LjUtNDM2LjVjMC02Ni0xNC40ODQtMTI4LjQ4LTQxLjAxNi0xODQuNS0xNi45NjkgNS4wMTU2LTMxLjUgMTUuOTg0LTQxLjQ4NCAzMHptLTExNy45OCAxMzMuNWMxNC4wMTYgMCAyNC45ODQgMTEuNDg0IDI0Ljk4NCAyNC45ODQgMCAxNC4wMTYtMTEuMDE2IDI0Ljk4NC0yNC45ODQgMjQuOTg0LTExOC41IDAtMjE1LjAyIDk2LjUxNi0yMTUuMDIgMjE1LjQ4IDAgMTMuNS0xMS40ODQgMjQuOTg0LTI0Ljk4NCAyNC45ODQtMTQuMDE2IDAtMjQuOTg0LTExLjQ4NC0yNC45ODQtMjQuOTg0IDAtMTE5LjAyLTk2LjUxNi0yMTUuNDgtMjE1LjQ4LTIxNS40OC0xMy41IDAtMjQuOTg0LTExLjAxNi0yNC45ODQtMjQuOTg0IDAtMTMuNSAxMS40ODQtMjQuOTg0IDI0Ljk4NC0yNC45ODQgMTE5LjAyIDAgMjE1LjQ4LTk2LjUxNiAyMTUuNDgtMjE1LjAyIDAtMTQuMDE2IDExLjAxNi0yNC45ODQgMjQuOTg0LTI0Ljk4NCAxMy41IDAgMjQuOTg0IDExLjAxNiAyNC45ODQgMjQuOTg0IDAgMTE4LjUgOTYuNTE2IDIxNS4wMiAyMTUuMDIgMjE1LjAyeiIgZmlsbD0iIzRjMjVlMCIvPgogPHBhdGggZD0ibTQ2OCA2MDMuOThjNTYuMDE2IDI2LjQ4NCAxMDEuNDggNzIgMTI4LjAyIDEyOC4wMiAyNi4wMTYtNTYuMDE2IDcxLjQ4NC0xMDEuNDggMTI3LjUtMTI4LjAyLTU2LjAxNi0yNi4wMTYtMTAxLjQ4LTcxLjQ4NC0xMjcuNS0xMjcuNS0yNi41MzEgNTYuMDE2LTcyIDEwMS41My0xMjguMDIgMTI3LjV6IiBmaWxsPSIjNGMyNWUwIi8+Cjwvc3ZnPgo=">
        <bpmn:documentation>Handle card related inquiries (e.g. to report a stolen card or to freeze a card)</bpmn:documentation>
        <bpmn:extensionElements>
          <zeebe:taskDefinition type="dev.example:a2a:1" />
          <zeebe:ioMapping>
            <zeebe:input source="https://demo-credit-card-support-a2a-56019549721.europe-west1.run.app/a2a/" target="baseUrl" />
            <zeebe:input source="A2A" target="mode" />
            <zeebe:input target="inputText" />
            <zeebe:input target="intent" />
            <zeebe:input target="parameters" />
            <zeebe:input target="headers" />
            <zeebe:input source="= {&#10;  &#34;jsonrpc&#34;: &#34;2.0&#34;,&#10;  &#34;id&#34;: &#34;475478&#34;,&#10;  &#34;method&#34;: &#34;message/send&#34;,&#10;  &#34;params&#34;: {&#10;    &#34;message&#34;: {&#10;      &#34;messageId&#34;: &#34;m-123&#34;,&#10;      &#34;role&#34;: &#34;user&#34;,&#10;      &#34;parts&#34;: [&#10;        { &#34;text&#34;: fromAi(toolCall.creditCardAgentIstructions, &#34;The instructions/prompt for the card agent&#34;) }&#10;      ]&#10;    }&#10;  }&#10;}" target="a2aPayload" />
          </zeebe:ioMapping>
          <zeebe:taskHeaders>
            <zeebe:header key="resultVariable" value="toolCallResult" />
          </zeebe:taskHeaders>
        </bpmn:extensionElements>
      </bpmn:serviceTask>
      <bpmn:callActivity id="Tool_AskCustomer" name="Ask customer">
        <bpmn:extensionElements>
          <zeebe:calledElement processId="customer-communication-question" propagateAllChildVariables="false" propagateAllParentVariables="false" />
          <zeebe:ioMapping>
            <zeebe:input source="=supportCase.communicationContext" target="communicationContext" />
            <zeebe:input source="={&#10;  &#34;subject&#34;: &#34;RE: &#34; + supportCase.subject,&#10;  &#34;text&#34;: fromAi(toolCall.response, &#34;The text response to reply to the customer&#34;)&#10;}" target="communicationContent" />
            <zeebe:output source="=communicationResult" target="toolCallResult" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
      </bpmn:callActivity>
      <bpmn:callActivity id="Tool_InformCustomer" name="Inform&#10;customer">
        <bpmn:extensionElements>
          <zeebe:calledElement processId="customer-communication-information" propagateAllChildVariables="false" propagateAllParentVariables="false" />
          <zeebe:ioMapping>
            <zeebe:input source="=supportCase.communicationContext" target="communicationContext" />
            <zeebe:input source="={&#10;  &#34;subject&#34;: &#34;RE: &#34; + supportCase.subject,&#10;  &#34;text&#34;: fromAi(toolCall.response, &#34;The text information for the customer, probably the case resolution&#34;)&#10;}" target="communicationContent" />
            <zeebe:output source="=communicationResult" target="toolCallResult" />
          </zeebe:ioMapping>
        </bpmn:extensionElements>
      </bpmn:callActivity>
    </bpmn:adHocSubProcess>
    <bpmn:sequenceFlow id="Flow_1nojswc" sourceRef="AI_CustomerSupportAgent" targetRef="Activity_1mu0kb7" />
    <bpmn:exclusiveGateway id="Gateway_1sbtuh2" name="Review (exemplary samples)?">
      <bpmn:incoming>Flow_0xnx5gq</bpmn:incoming>
      <bpmn:outgoing>Flow_0g2kbqn</bpmn:outgoing>
      <bpmn:outgoing>Flow_19tm0v8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0xnx5gq" sourceRef="Activity_1mu0kb7" targetRef="Gateway_1sbtuh2" />
    <bpmn:sequenceFlow id="Flow_0g2kbqn" name="yes (1%)" sourceRef="Gateway_1sbtuh2" targetRef="Activity_04lvuy1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_13awtny">
      <bpmn:incoming>Flow_19tm0v8</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_19tm0v8" name="no (99%)" sourceRef="Gateway_1sbtuh2" targetRef="Event_13awtny">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_1sx7tol">
      <bpmn:incoming>Flow_1w8zj7s</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_1w8zj7s" sourceRef="Activity_04lvuy1" targetRef="Event_1sx7tol" />
    <bpmn:userTask id="Activity_04lvuy1" name="Review support resolution">
      <bpmn:extensionElements>
        <zeebe:userTask />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0g2kbqn</bpmn:incoming>
      <bpmn:outgoing>Flow_1w8zj7s</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="StartEvent_Email" name="Customer email received" zeebe:modelerTemplate="io.camunda.connectors.inbound.EmailMessageStart.v1" zeebe:modelerTemplateVersion="2" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzkwXzI0MjApIj4KPHBhdGggZD0iTTguMzM4MzUgOS45NTM2NUwxMC4zODk0IDEyLjAxMDRMOC4zMzI2MiAxNC4wNjcyTDkuMTQ2MTYgMTQuODc1TDEyLjAxMDcgMTIuMDEwNEw5LjE0NjE2IDkuMTQ1ODNMOC4zMzgzNSA5Ljk1MzY1WiIgZmlsbD0iYmxhY2siLz4KPHBhdGggZD0iTTEyLjM0ODggOS45NTM2NUwxNC4zOTk4IDEyLjAxMDRMMTIuMzQzIDE0LjA2NzJMMTMuMTU2NiAxNC44NzVMMTYuMDIxMiAxMi4wMTA0TDEzLjE1NjYgOS4xNDU4M0wxMi4zNDg4IDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNMy45NzIgMTEuNDM3NUgxLjEyNTMzVjIuNzkyMTlMNy42NzM3NiA3LjMyMzk2QzcuNzY5NjcgNy4zOTA0OSA3Ljg4MzYgNy40MjYxNCA4LjAwMDMyIDcuNDI2MTRDOC4xMTcwNSA3LjQyNjE0IDguMjMwOTggNy4zOTA0OSA4LjMyNjg5IDcuMzIzOTZMMTQuODc1MyAyLjc5MjE5VjhIMTYuMDIxMlYyLjI3MDgzQzE2LjAyMTIgMS45NjY5NCAxNS45MDA0IDEuNjc1NDkgMTUuNjg1NiAxLjQ2MDYxQzE1LjQ3MDcgMS4yNDU3MiAxNS4xNzkyIDEuMTI1IDE0Ljg3NTMgMS4xMjVIMS4xMjUzM0MwLjgyMTQzMiAxLjEyNSAwLjUyOTk4NCAxLjI0NTcyIDAuMzE1MDk5IDEuNDYwNjFDMC4xMDAyMTQgMS42NzU0OSAtMC4wMjA1MDc4IDEuOTY2OTQgLTAuMDIwNTA3OCAyLjI3MDgzVjExLjQzNzVDLTAuMDIwNTA3OCAxMS43NDE0IDAuMTAwMjE0IDEyLjAzMjggMC4zMTUwOTkgMTIuMjQ3N0MwLjUyOTk4NCAxMi40NjI2IDAuODIxNDMyIDEyLjU4MzMgMS4xMjUzMyAxMi41ODMzSDMuOTcyVjExLjQzNzVaTTEzLjYxNDkgMi4yNzA4M0w4LjAwMDMyIDYuMTU1MjFMMi4zODU3NCAyLjI3MDgzSDEzLjYxNDlaIiBmaWxsPSIjRkM1RDBEIi8+CjxwYXRoIGQ9Ik00LjI4MjEgOS45NTM2NUw2LjMzMzE0IDEyLjAxMDRMNC4yNzYzNyAxNC4wNjcyTDUuMDg5OTEgMTQuODc1TDcuOTU0NDkgMTIuMDEwNEw1LjA4OTkxIDkuMTQ1ODNMNC4yODIxIDkuOTUzNjVaIiBmaWxsPSJibGFjayIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzkwXzI0MjAiPgo8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGZpbGw9IndoaXRlIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==">
      <bpmn:extensionElements>
        <zeebe:properties>
          <zeebe:property name="inbound.type" value="io.camunda:connector-email-inbound:1" />
          <zeebe:property name="authentication.type" value="simple" />
          <zeebe:property name="authentication.username" value="{{secrets.GMAIL_INBOX_USER}}" />
          <zeebe:property name="authentication.password" value="{{secrets.GMAIL_INBOX_PASSWORD}}" />
          <zeebe:property name="data.imapConfig.imapHost" value="imap.gmail.com" />
          <zeebe:property name="data.imapConfig.imapPort" value="993" />
          <zeebe:property name="data.imapConfig.imapCryptographicProtocol" value="TLS" />
          <zeebe:property name="data.pollingWaitTime" value="PT10S" />
          <zeebe:property name="data.pollingConfigDiscriminator" value="unseenPollingConfig" />
          <zeebe:property name="data.pollingConfig.handlingStrategy" value="READ" />
          <zeebe:property name="activationCondition" value="=is empty(headers[key = &#34;In-Reply-To&#34;])" />
          <zeebe:property name="consumeUnmatchedEvents" value="false" />
          <zeebe:property name="correlationRequired" value="notRequired" />
          <zeebe:property name="deduplicationModeManualFlag" value="false" />
          <zeebe:property name="deduplicationMode" value="AUTO" />
          <zeebe:property name="resultVariable" value="currentEmail" />
          <zeebe:property name="resultExpression" />
        </zeebe:properties>
        <zeebe:ioMapping>
          <zeebe:output source="=&#34;email&#34;" target="communicationChannel" />
          <zeebe:output source="=currentEmail" target="currentEmail" />
          <zeebe:output source="=currentEmail.plainTextBody" target="customerRequest" />
          <zeebe:output source="={&#10;    &#34;subject&#34;: currentEmail.subject,&#10;    &#34;request&#34;: currentEmail.plainTextBody,&#10;    &#34;communicationContext&#34;: {&#10;        &#34;channel&#34; : &#34;email&#34;,&#10;        &#34;emailAddress&#34;: currentEmail.fromAddress,&#10;        &#34;conversationId&#34;: currentEmail.messageId&#10;    }&#10;}" target="supportCase" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_17hp3tr</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1ygmb0p" messageRef="Message_16m9y1n" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_1mu0kb7" name="Send customer information and survey">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="noop" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1nojswc</bpmn:incoming>
      <bpmn:outgoing>Flow_0xnx5gq</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:startEvent id="StartEvent_Blank" name="Customer support request received (other channels)">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;    &#34;subject&#34;: &#34;Help&#34;,&#10;    &#34;request&#34;: &#34;Whats my account details. Customer id is 42&#34;,&#10;    &#34;originalMessageInFull&#34;: &#34;&#34;,&#10;    &#34;communicationContext&#34;: {&#10;        &#34;channel&#34; : &#34;email&#34;,&#10;        &#34;channelId&#34;: &#34;&#60;UUID of the channel&#62;&#34;,&#10;        &#34;emailAddress&#34;: &#34;bernd.it.depends.ruecker@gmail.com&#34;,&#10;        &#34;conversationId&#34;: null&#10;    }&#10;}" target="supportCase" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_04dj9kf</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_1i0kcwv" sourceRef="StartEvent_Chat" targetRef="Task_ChatThinkingUpdate" />
    <bpmn:startEvent id="Event_0nn09te" name="Microservice API called">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;    &#34;subject&#34;: &#34;Chat Request&#34;,&#10;    &#34;request&#34;: customerRequest,&#10;    &#34;originalMessageInFull&#34;: customerRequest,&#10;    &#34;communicationContext&#34;: {&#10;        &#34;channel&#34; : &#34;voice&#34;,&#10;        &#34;emailAddress&#34;: &#34;bernd.it.depends.ruecker@gmail.com&#34;,&#10;        &#34;conversationId&#34;: conversationId&#10;    }&#10;}" target="supportCase" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_18e2jyj</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1p5ydf6" messageRef="Message_3hatd6n" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_LoadCustomerMasterData" name="Load customer master data" zeebe:modelerTemplate="io.camunda.connectors.Jdbc.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTMiIGhlaWdodD0iNTEyIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgNTEzIDUxMiI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2EpIj4KICAgIDxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik00MjIuMDY5IDQxNi45OTVWMjUzLjA0NGgtMjQuNzU2VjQ0NC4zMmg5OS4wMjR2LTI3LjMyNWgtNzQuMjY4Wm0tNzQuMjY4LTE2My45NTFoLTQ5LjUxMmMtNi41NjUgMC0xMi44NjIgMi44NzktMTcuNTA1IDguMDA0LTQuNjQzIDUuMTI0LTcuMjUxIDEyLjA3NC03LjI1MSAxOS4zMjJ2MTM2LjYyNWMwIDcuMjQ3IDIuNjA4IDE0LjE5NyA3LjI1MSAxOS4zMjEgNC42NDMgNS4xMjUgMTAuOTQgOC4wMDQgMTcuNTA1IDguMDA0aDEyLjM3OHYyNy4zMjVjMCA3LjI0NyAyLjYwOCAxNC4xOTcgNy4yNTEgMTkuMzIxIDQuNjQzIDUuMTI1IDEwLjk0IDguMDA0IDE3LjUwNSA4LjAwNGgyNC43NTZ2LTI3LjMyNWgtMjQuNzU2VjQ0NC4zMmgxMi4zNzhjNi41NjYgMCAxMi44NjMtMi44NzkgMTcuNTA1LTguMDA0IDQuNjQzLTUuMTI0IDcuMjUxLTEyLjA3NCA3LjI1MS0xOS4zMjFWMjgwLjM3YzAtNy4yNDgtMi42MDgtMTQuMTk4LTcuMjUxLTE5LjMyMi00LjY0Mi01LjEyNS0xMC45MzktOC4wMDQtMTcuNTA1LTguMDA0Wm0tNDkuNTEyIDE2My45NTFWMjgwLjM3aDQ5LjUxMnYxMzYuNjI1aC00OS41MTJabS03NC4yNjggMjcuMzI1aC03NC4yNjh2LTI3LjMyNWg3NC4yNjh2LTU0LjY1aC00OS41MTJjLTYuNTY2IDAtMTIuODYyLTIuODc5LTE3LjUwNS04LjAwNC00LjY0My01LjEyNC03LjI1MS0xMi4wNzQtNy4yNTEtMTkuMzIxdi01NC42NWMwLTcuMjQ4IDIuNjA4LTE0LjE5OCA3LjI1MS0xOS4zMjIgNC42NDMtNS4xMjUgMTAuOTM5LTguMDA0IDE3LjUwNS04LjAwNGg3NC4yNjh2MjcuMzI2aC03NC4yNjh2NTQuNjVoNDkuNTEyYzYuNTY2IDAgMTIuODYzIDIuODc4IDE3LjUwNSA4LjAwMyA0LjY0MyA1LjEyNCA3LjI1MSAxMi4wNzUgNy4yNTEgMTkuMzIydjU0LjY1YzAgNy4yNDctMi42MDggMTQuMTk3LTcuMjUxIDE5LjMyMS00LjY0MiA1LjEyNS0xMC45MzkgOC4wMDQtMTcuNTA1IDguMDA0WiIvPgogICAgPHBhdGggZmlsbD0iI0M2MjlDRCIgZD0iTTE2MC42OTUgMTMuMDMyYy02My4wNjYgMC0xMzAuOTQzIDE2LjQ1LTEzMC45NDMgNTIuNTU3djIzNi41MDZjMCAyMi4wNyAyNS40MDMgMzYuNzYyIDU5LjUyIDQ0Ljg3di0yNi44ODJjLTIzLjczNi02LjIxLTM1LjA2LTE1LjAxOS0zNS43MTItMTcuOTg4di00Ni45MzhjMTcuNzggOS44NDIgMTcuNzMzIDkuMTg1IDQ1LjQyNCAxMi4wMDl2LTI2LjI0N2MtNDYuMTYyLTQuOTU5LTQzLjk2NS0xMS44OTktNDUuNDI0LTE3LjY2MXYtNDYuOTM3YzI1LjMzIDE0LjAyNSA2Ny4xNjkgMjAuNjU5IDEwNy4xMzUgMjAuNjU5IDYzLjA2NiAwIDEzMC45NDMtMTYuNDUxIDEzMC45NDMtNTIuNTU3di03OC44NGMtLjAwOS0zNi4xMDctNjcuODgxLTUyLjU1LTEzMC45NDMtNTIuNTVaTTUzLjU0MiA2NS43ODdjMS44MTMtNy4yOTUgMzcuNTE0LTI2LjQ3NyAxMDcuMTUzLTI2LjQ3NyA2OS4wMTQgMCAxMDQuNjk0IDE4Ljg0MyAxMDcuMDk3IDI2LjI3OS0yLjQwMyA3LjQzNS0zOC4wODMgMjYuMjc4LTEwNy4wOTcgMjYuMjc4LTY5LjYzOSAwLTEwNS4zMzktMTkuMTgzLTEwNy4xNTMtMjYuMDhabTIxNC4yODggNzguNDdjLTEuOTEyIDcuMzItMzcuNjAxIDI2LjQ0Ni0xMDcuMTM1IDI2LjQ0Ni02OS42MzkgMC0xMDUuMzM5LTE5LjE4NC0xMDcuMTM1LTI2LjI3OVY5Ny40ODdjMjUuMzMgMTQuMDI1IDY3LjE2OSAyMC42NTkgMTA3LjEzNSAyMC42NTkgMzkuOTY2IDAgODEuODA1LTYuNjM0IDEwNy4xMzUtMjAuNjU5djQ2Ljc3WiIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iYSI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yOS43NTQgNmg0NTIuOTkxdjUwMEgyOS43NTR6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg==">
      <bpmn:documentation>Always query customer data</bpmn:documentation>
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:connector-jdbc:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="POSTGRESQL" target="database" />
          <zeebe:input source="uri" target="connection.authType" />
          <zeebe:input source="jdbc:postgresql://camunda-ams-25-demo-loan.c3qycg2e00y7.us-east-1.rds.amazonaws.com:5432/postgres" target="connection.uri" />
          <zeebe:input source="={&#10;  useSSL:true, &#10;  user: &#34;postgres&#34;, &#10;  password:&#34;{{secrets.POSTGRESQL_MASTER_PASSWORD}}&#34;&#10;}" target="connection.uriProperties" />
          <zeebe:input source="=true" target="data.returnResults" />
          <zeebe:input source="SELECT * FROM CUSTOMER WHERE email = :email" target="data.query" />
          <zeebe:input source="={email: supportCase.communicationContext.emailAddress}" target="data.variables" />
          <zeebe:output source="=context put(supportCase, [&#34;customer&#34;], customerData)" target="supportCase" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={&#10;  customerData: response.resultSet[1]&#10;}" />
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1hmpbzz</bpmn:incoming>
      <bpmn:outgoing>Flow_0fv4284</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0fv4284" sourceRef="Task_LoadCustomerMasterData" targetRef="AI_CustomerSupportAgent" />
    <bpmn:exclusiveGateway id="Gateway_0mwer7n" name="Existing customer?">
      <bpmn:incoming>Flow_18e2jyj</bpmn:incoming>
      <bpmn:incoming>Flow_04dj9kf</bpmn:incoming>
      <bpmn:incoming>Flow_0l0i2vg</bpmn:incoming>
      <bpmn:incoming>Flow_17hp3tr</bpmn:incoming>
      <bpmn:incoming>Flow_1rqop3e</bpmn:incoming>
      <bpmn:outgoing>Flow_1hmpbzz</bpmn:outgoing>
      <bpmn:outgoing>Flow_09odqrt</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1hmpbzz" name="yes" sourceRef="Gateway_0mwer7n" targetRef="Task_LoadCustomerMasterData">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_09odqrt" name="no" sourceRef="Gateway_0mwer7n" targetRef="AI_CustomerSupportAgent">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:startEvent id="StartEvent_Chat" name="Customer support chat started" zeebe:modelerTemplate="io.camunda.chat.messageStart.2afef382-db76-4151-a6a3-079b58f0205f.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIKICAgICBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxLjgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKICAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0iQ2hhdCI+CiAgPCEtLSBidWJibGUgLS0+CiAgPHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE0IiByeD0iNCIgLz4KICA8IS0tIHRhaWwgLS0+CiAgPHBhdGggZD0iTTggMTdMNCAyMVYxNyIgLz4KICA8IS0tIGRvdHMgLS0+CiAgPGNpcmNsZSBjeD0iOCIgY3k9IjEwIiByPSIxLjIiIC8+CiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMCIgcj0iMS4yIiAvPgogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTAiIHI9IjEuMiIgLz4KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;    &#34;subject&#34;: &#34;Chat Request&#34;,&#10;    &#34;request&#34;: message.parts[count(message.parts)].content,&#10;    &#34;originalMessageInFull&#34;: string join(message.parts.content, &#34;; &#34;),&#10;    &#34;communicationContext&#34;: {&#10;        &#34;channel&#34; : &#34;chat&#34;,&#10;        &#34;channelId&#34;: channelUUID,&#10;        &#34;emailAddress&#34;: &#34;bernd.it.depends.ruecker@gmail.com&#34;,&#10;        &#34;conversationId&#34;: conversationUUID,&#10;        &#34;lastMessageId&#34;: message.id&#10;    }&#10;}" target="supportCase" />
          <zeebe:output source="=message" target="chatMessage" />
        </zeebe:ioMapping>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1i0kcwv</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1tghb2x" messageRef="Message_026jxye" />
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_ChatThinkingUpdate" name="Update status &#10;(&#34;Thinking...&#34;)" zeebe:modelerTemplate="io.camunda.chat.rest.reply.camunda-chat-admin-986421179728.europe-west1.run.app.v1" zeebe:modelerTemplateVersion="1" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIKICAgICBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIxLjgiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKICAgICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHJvbGU9ImltZyIgYXJpYS1sYWJlbD0iQ2hhdCI+CiAgPCEtLSBidWJibGUgLS0+CiAgPHJlY3QgeD0iMyIgeT0iMyIgd2lkdGg9IjE4IiBoZWlnaHQ9IjE0IiByeD0iNCIgLz4KICA8IS0tIHRhaWwgLS0+CiAgPHBhdGggZD0iTTggMTdMNCAyMVYxNyIgLz4KICA8IS0tIGRvdHMgLS0+CiAgPGNpcmNsZSBjeD0iOCIgY3k9IjEwIiByPSIxLjIiIC8+CiAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMCIgcj0iMS4yIiAvPgogIDxjaXJjbGUgY3g9IjE2IiBjeT0iMTAiIHI9IjEuMiIgLz4KPC9zdmc+">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" retries="3" />
        <zeebe:ioMapping>
          <zeebe:input source="https://camunda-chat-admin-986421179728.europe-west1.run.app/api/" target="apiBaseUrl" />
          <zeebe:input source="=supportCase.communicationContext.channelId" target="channelUUID" />
          <zeebe:input source="=supportCase.communicationContext.conversationId" target="conversationUUID" />
          <zeebe:input source="{{secrets.CHAT_BACKEND_SERVICE_TOKEN}}" target="authToken" />
          <zeebe:input source="thinking" target="messageType" />
          <zeebe:input source="=&#34;Thank you for your message - let me sort this out for you...&#34;" target="content" />
          <zeebe:input source="={&#34;type&#34;: &#34;bearer&#34;, &#34;token&#34;: authToken}" target="authentication" />
          <zeebe:input source="PUT" target="method" />
          <zeebe:input source="=apiBaseUrl + &#34;channels/&#34; + channelUUID + &#34;/conversations/&#34; + conversationUUID + &#34;/messages/&#34; + uuid()" target="url" />
          <zeebe:input source="={&#34;senderUsername&#34;:&#34;Camunda&#34;,&#34;parts&#34;:[{&#34;type&#34;: messageType, &#34;content&#34;: content, &#34;position&#34;: 0}]}" target="body" />
          <zeebe:input source="=false" target="storeResponse" />
          <zeebe:input source="=false" target="ignoreNullValues" />
          <zeebe:input source="=20" target="connectionTimeoutInSeconds" />
          <zeebe:input source="=20" target="readTimeoutInSeconds" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="retryBackoff" value="PT0S" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1i0kcwv</bpmn:incoming>
      <bpmn:outgoing>Flow_0l0i2vg</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_0l0i2vg" sourceRef="Task_ChatThinkingUpdate" targetRef="Gateway_0mwer7n" />
    <bpmn:sequenceFlow id="Flow_18e2jyj" sourceRef="Event_0nn09te" targetRef="Gateway_0mwer7n" />
    <bpmn:sequenceFlow id="Flow_04dj9kf" sourceRef="StartEvent_Blank" targetRef="Gateway_0mwer7n" />
    <bpmn:sequenceFlow id="Flow_17hp3tr" sourceRef="StartEvent_Email" targetRef="Gateway_0mwer7n" />
    <bpmn:startEvent id="Event_1s8cboy" name="GetVocal request received" zeebe:modelerTemplate="Template_0zt2ly0" zeebe:modelerTemplateVersion="3" zeebe:modelerTemplateIcon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDgxIiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDQ4MSAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0wIDEwNS4wNkMwIDk5LjA4MTcgNC44NDYyMiA5NC4yMzU1IDEwLjgyNDMgOTQuMjM1NUMxNi44MDI1IDk0LjIzNTUgMjEuNjQ4NyA5OS4wODE3IDIxLjY0ODcgMTA1LjA2VjEyNS40MzVDMjEuNjQ4NyAxMzEuNDEzIDE2LjgwMjUgMTM2LjI1OSAxMC44MjQzIDEzNi4yNTlDNC44NDYyMiAxMzYuMjU5IDAgMTMxLjQxMyAwIDEyNS40MzVWMTA1LjA2WiIgZmlsbD0iIzExMTExMSIvPgo8cGF0aCBkPSJNMTE0LjYxMSA4Mi4xMzc3QzExNC42MTEgNzYuMTU5NSAxMTkuNDU3IDcxLjMxMzMgMTI1LjQzNSA3MS4zMTMzQzEzMS40MTMgNzEuMzEzMyAxMzYuMjU5IDc2LjE1OTUgMTM2LjI1OSA4Mi4xMzc3VjEwMi41MTNDMTM2LjI1OSAxMDguNDkxIDEzMS40MTMgMTEzLjMzNyAxMjUuNDM1IDExMy4zMzdDMTE5LjQ1NyAxMTMuMzM3IDExNC42MTEgMTA4LjQ5MSAxMTQuNjExIDEwMi41MTNWODIuMTM3N1oiIGZpbGw9IiMxMTExMTEiLz4KPHBhdGggZD0iTTQ1OC40NDMgMTA1LjA2QzQ1OC40NDMgOTkuMDgxNyA0NjMuMjg5IDk0LjIzNTUgNDY5LjI2NyA5NC4yMzU1QzQ3NS4yNDUgOTQuMjM1NSA0ODAuMDkxIDk5LjA4MTcgNDgwLjA5MSAxMDUuMDZWMTI1LjQzNUM0ODAuMDkxIDEzMS40MTMgNDc1LjI0NSAxMzYuMjU5IDQ2OS4yNjcgMTM2LjI1OUM0NjMuMjg5IDEzNi4yNTkgNDU4LjQ0MyAxMzEuNDEzIDQ1OC40NDMgMTI1LjQzNVYxMDUuMDZaIiBmaWxsPSIjMTExMTExIi8+CjxwYXRoIGQ9Ik01Ny4zMDUzIDU5LjIxNTVDNTcuMzA1MyA1My4yMzc0IDYyLjE1MTYgNDguMzkxMiA2OC4xMjk3IDQ4LjM5MTJDNzQuMTA3OCA0OC4zOTEyIDc4Ljk1NCA1My4yMzc0IDc4Ljk1NCA1OS4yMTU1VjEyNi43MDhDNzguOTU0IDEzMi42ODcgNzQuMTA3OCAxMzcuNTMzIDY4LjEyOTcgMTM3LjUzM0M2Mi4xNTE2IDEzNy41MzMgNTcuMzA1MyAxMzIuNjg3IDU3LjMwNTMgMTI2LjcwOFY1OS4yMTU1WiIgZmlsbD0iIzExMTExMSIvPgo8cGF0aCBkPSJNMTcxLjkxNiAzOC44NDAzQzE3MS45MTYgMzIuODYyMiAxNzYuNzYyIDI4LjAxNTkgMTgyLjc0IDI4LjAxNTlDMTg4LjcxOSAyOC4wMTU5IDE5My41NjUgMzIuODYyMiAxOTMuNTY1IDM4Ljg0MDNWOTYuMTQ1NkMxOTMuNTY1IDEwMi4xMjQgMTg4LjcxOSAxMDYuOTcgMTgyLjc0IDEwNi45N0MxNzYuNzYyIDEwNi45NyAxNzEuOTE2IDEwMi4xMjQgMTcxLjkxNiA5Ni4xNDU2VjM4Ljg0MDNaIiBmaWxsPSIjMTExMTExIi8+CjxwYXRoIGQ9Ik0yODYuNTI3IDM4Ljg0MDNDMjg2LjUyNyAzMi44NjIyIDI5MS4zNzMgMjguMDE1OSAyOTcuMzUxIDI4LjAxNTlDMzAzLjMyOSAyOC4wMTU5IDMwOC4xNzUgMzIuODYyMiAzMDguMTc1IDM4Ljg0MDNWOTYuMTQ1NkMzMDguMTc1IDEwMi4xMjQgMzAzLjMyOSAxMDYuOTcgMjk3LjM1MSAxMDYuOTdDMjkxLjM3MyAxMDYuOTcgMjg2LjUyNyAxMDIuMTI0IDI4Ni41MjcgOTYuMTQ1NlYzOC44NDAzWiIgZmlsbD0iIzExMTExMSIvPgo8cGF0aCBkPSJNMzQzLjgzMiA4My40MTExQzM0My44MzIgNzcuNDMzIDM0OC42NzggNzIuNTg2OCAzNTQuNjU2IDcyLjU4NjhDMzYwLjYzNSA3Mi41ODY4IDM2NS40ODEgNzcuNDMzIDM2NS40ODEgODMuNDExMVYxMjYuNzA4QzM2NS40ODEgMTMyLjY4NyAzNjAuNjM1IDEzNy41MzMgMzU0LjY1NiAxMzcuNTMzQzM0OC42NzggMTM3LjUzMyAzNDMuODMyIDEzMi42ODcgMzQzLjgzMiAxMjYuNzA4VjgzLjQxMTFaIiBmaWxsPSIjMTExMTExIi8+CjxwYXRoIGQ9Ik00MDEuMTM3IDYwLjQ4OUM0MDEuMTM3IDU0LjUxMDkgNDA1Ljk4NCA0OS42NjQ2IDQxMS45NjIgNDkuNjY0NkM0MTcuOTQgNDkuNjY0NiA0MjIuNzg2IDU0LjUxMDkgNDIyLjc4NiA2MC40ODlWMTEzLjk3NEM0MjIuNzg2IDExOS45NTIgNDE3Ljk0IDEyNC43OTggNDExLjk2MiAxMjQuNzk4QzQwNS45ODQgMTI0Ljc5OCA0MDEuMTM3IDExOS45NTIgNDAxLjEzNyAxMTMuOTc0VjYwLjQ4OVoiIGZpbGw9IiMxMTExMTEiLz4KPHBhdGggZD0iTTIyOS4yMjEgMTAuODI0M0MyMjkuMjIxIDQuODQ2MjIgMjM0LjA2OCAwIDI0MC4wNDYgMEMyNDYuMDI0IDAgMjUwLjg3IDQuODQ2MjIgMjUwLjg3IDEwLjgyNDNWMTE5LjA2OEMyNTAuODcgMTI1LjA0NiAyNDYuMDI0IDEyOS44OTIgMjQwLjA0NiAxMjkuODkyQzIzNC4wNjggMTI5Ljg5MiAyMjkuMjIxIDEyNS4wNDYgMjI5LjIyMSAxMTkuMDY4VjEwLjgyNDNaIiBmaWxsPSIjMTExMTExIi8+CjxwYXRoIGQ9Ik00NDYuODI5IDI1NC4zNDVINDMyLjQyMlYxODYuMjA1SDQ0Ni44MjlWMjU0LjM0NVoiIGZpbGw9IiMxRTFFMUUiLz4KPHBhdGggZD0iTTM5My4zOTMgMjU1LjYxMUMzODguNDYxIDI1NS42MTEgMzg0LjUzNSAyNTQuMzQ1IDM4MS42MTUgMjUxLjgxNEMzNzguNjk1IDI0OS4yMTggMzc3LjIzNCAyNDUuNzQ2IDM3Ny4yMzQgMjQxLjM5OEMzNzcuMjM0IDIzNy4yNDUgMzc4LjQwMiAyMzMuOTY4IDM4MC43MzkgMjMxLjU2N0MzODMuMDc1IDIyOS4xNjUgMzg3LjIyOCAyMjcuNDQ2IDM5My4xOTkgMjI2LjQwN0w0MDQuNjg1IDIyNC40NjFDNDA2Ljg5MiAyMjQuMDcxIDQwOC40NDkgMjIzLjUyIDQwOS4zNTggMjIyLjgwNkM0MTAuMjY2IDIyMi4wOTIgNDEwLjcyMSAyMjEuMDIxIDQxMC43MjEgMjE5LjU5M0M0MTAuNzIxIDIxNy43NzYgNDEwLjA3MiAyMTYuMzgxIDQwOC43NzQgMjE1LjQwOEM0MDcuNTQxIDIxNC40MzQgNDA1LjM2NyAyMTMuOTQ3IDQwMi4yNTIgMjEzLjk0N0MzOTUuODI3IDIxMy45NDcgMzkyLjUxNyAyMTYuNDc4IDM5Mi4zMjMgMjIxLjU0SDM3OC4yMDhDMzc4LjQwMiAyMTYuMjE5IDM4MC41NzcgMjExLjk2OCAzODQuNzMgMjA4Ljc4OEMzODguOTQ4IDIwNS42MDggMzk0LjY5MSAyMDQuMDE4IDQwMS45NiAyMDQuMDE4QzQwOS4yMjggMjA0LjAxOCA0MTQuNzEyIDIwNS40NzkgNDE4LjQxMSAyMDguMzk5QzQyMi4xMSAyMTEuMzE5IDQyMy45NTkgMjE1LjQwOCA0MjMuOTU5IDIyMC42NjRWMjQxLjY5QzQyMy45NTkgMjQ1LjY0OSA0MjQuMjE5IDI0OS44NjcgNDI0LjczOCAyNTQuMzQ1SDQxMi4xODFDNDExLjY2MiAyNTAuOTA2IDQxMS40MDIgMjQ3LjQzNCA0MTEuNDAyIDI0My45MjlDNDEwLjIzNCAyNDcuNDk5IDQwOC4xMjUgMjUwLjM1NCA0MDUuMDc1IDI1Mi40OTZDNDAyLjAyNSAyNTQuNTcyIDM5OC4xMzEgMjU1LjYxMSAzOTMuMzkzIDI1NS42MTFaTTM5OC4yNjEgMjQ1Ljc3OUM0MDIuMDg5IDI0NS43NzkgNDA1LjEwNyAyNDQuNDgxIDQwNy4zMTQgMjQxLjg4NUM0MDkuNTg1IDIzOS4yMjQgNDEwLjcyMSAyMzUuNjU1IDQxMC43MjEgMjMxLjE3N1YyMjkuMDM2QzQwOS41NTIgMjI5LjgxNCA0MDguMzUyIDIzMC40MzEgNDA3LjExOSAyMzAuODg1QzQwNS45NTEgMjMxLjM0IDQwNC40OTEgMjMxLjc2MSA0MDIuNzM4IDIzMi4xNTFMMzk4LjY1IDIzMy4xMjRDMzk2LjA1NCAyMzMuNzczIDM5NC4yMDUgMjM0LjYxNyAzOTMuMTAxIDIzNS42NTVDMzkxLjk5OCAyMzYuNjkzIDM5MS40NDcgMjM4LjEyMSAzOTEuNDQ3IDIzOS45MzhDMzkxLjQ0NyAyNDEuODIgMzkyLjA2MyAyNDMuMjggMzkzLjI5NiAyNDQuMzE5QzM5NC41OTQgMjQ1LjI5MiAzOTYuMjQ5IDI0NS43NzkgMzk4LjI2MSAyNDUuNzc5WiIgZmlsbD0iIzFFMUUxRSIvPgo8cGF0aCBkPSJNMzE5LjkyMiAyMzAuMDA5QzMxOS45MjIgMjI1LjI3MiAzMjAuODYzIDIyMC45NTYgMzIyLjc0NSAyMTcuMDYyQzMyNC42MjcgMjEzLjEwNCAzMjcuNTQ3IDIwOS45NTYgMzMxLjUwNiAyMDcuNjJDMzM1LjUyOSAyMDUuMjg0IDM0MC41NTkgMjA0LjExNiAzNDYuNTk0IDIwNC4xMTZDMzU0LjcwNiAyMDQuMTE2IDM2MC45MzYgMjA2LjA5NSAzNjUuMjg0IDIxMC4wNTRDMzY5LjYzMiAyMTQuMDEyIDM3MS45MDMgMjE5LjEzOSAzNzIuMDk4IDIyNS40MzRIMzU4LjA4MUMzNTcuODIxIDIyMi4yNTQgMzU2Ljc4MyAyMTkuNzg4IDM1NC45NjYgMjE4LjAzNkMzNTMuMTQ4IDIxNi4yODQgMzUwLjQ1NSAyMTUuNDA4IDM0Ni44ODYgMjE1LjQwOEMzNDIuNzk4IDIxNS40MDggMzM5LjY4MyAyMTYuNTQzIDMzNy41NDEgMjE4LjgxNUMzMzUuNDY0IDIyMS4wMjEgMzM0LjQyNiAyMjQuNzUzIDMzNC40MjYgMjMwLjAwOUMzMzQuNDI2IDIzNS4yNjYgMzM1LjQzMiAyMzkuMDMgMzM3LjQ0NCAyNDEuMzAxQzMzOS41MiAyNDMuNTA3IDM0Mi42MDMgMjQ0LjYxMSAzNDYuNjkxIDI0NC42MTFDMzUwLjMyNiAyNDQuNjExIDM1My4wODQgMjQzLjY3IDM1NC45NjYgMjQxLjc4OEMzNTYuOTEyIDIzOS45MDYgMzU4LjA0OCAyMzcuNDA3IDM1OC4zNzMgMjM0LjI5MkgzNzIuMzlDMzcyLjI2IDIzOC4yNTEgMzcxLjIyMiAyNDEuODg1IDM2OS4yNzUgMjQ1LjE5NUMzNjcuMzkzIDI0OC40NCAzNjQuNTM4IDI1MS4wMzUgMzYwLjcwOSAyNTIuOTgyQzM1Ni45NDUgMjU0LjkyOSAzNTIuMzM3IDI1NS45MDMgMzQ2Ljg4NiAyNTUuOTAzQzM0MC44NTEgMjU1LjkwMyAzMzUuNzg5IDI1NC43MzQgMzMxLjcgMjUyLjM5OEMzMjcuNjc3IDI1MC4wNjIgMzI0LjY5MiAyNDYuOTQ3IDMyMi43NDUgMjQzLjA1M0MzMjAuODYzIDIzOS4wOTUgMzE5LjkyMiAyMzQuNzQ3IDMxOS45MjIgMjMwLjAwOVoiIGZpbGw9IiMxRTFFMUUiLz4KPHBhdGggZD0iTTI4OC43NjEgMjU1LjkwM0MyODIuNTk2IDI1NS45MDMgMjc3LjUwMiAyNTQuNzM0IDI3My40NzggMjUyLjM5OEMyNjkuNDU1IDI0OS45OTcgMjY2LjUwMiAyNDYuODUgMjY0LjYyIDI0Mi45NTZDMjYyLjczOCAyMzkuMDYyIDI2MS43OTcgMjM0LjcxNCAyNjEuNzk3IDIyOS45MTJDMjYxLjc5NyAyMjUuMTc0IDI2Mi43MzggMjIwLjg1OSAyNjQuNjIgMjE2Ljk2NUMyNjYuNTAyIDIxMy4wNzEgMjY5LjQ1NSAyMDkuOTU2IDI3My40NzggMjA3LjYyQzI3Ny41MDIgMjA1LjI4NCAyODIuNTk2IDIwNC4xMTYgMjg4Ljc2MSAyMDQuMTE2QzI5NC45MjYgMjA0LjExNiAzMDAuMDIgMjA1LjMxNiAzMDQuMDQ0IDIwNy43MTdDMzA4LjEzMiAyMTAuMDU0IDMxMS4wODUgMjEzLjE2OSAzMTIuOTAyIDIxNy4wNjJDMzE0Ljc4NCAyMjAuOTU2IDMxNS43MjUgMjI1LjIzOSAzMTUuNzI1IDIyOS45MTJDMzE1LjcyNSAyMzQuNjQ5IDMxNC43ODQgMjM4Ljk5NyAzMTIuOTAyIDI0Mi45NTZDMzExLjA4NSAyNDYuODUgMzA4LjEzMiAyNDkuOTk3IDMwNC4wNDQgMjUyLjM5OEMzMDAuMDIgMjU0LjczNCAyOTQuOTI2IDI1NS45MDMgMjg4Ljc2MSAyNTUuOTAzWk0yNzYuMzAxIDIzMC4wMDlDMjc2LjMwMSAyMzUuMzMxIDI3Ny4yNzUgMjM5LjA5NSAyNzkuMjIxIDI0MS4zMDFDMjgxLjE2OCAyNDMuNTA3IDI4NC4zNDggMjQ0LjYxMSAyODguNzYxIDI0NC42MTFDMjkzLjIzOSAyNDQuNjExIDI5Ni40NTEgMjQzLjUwNyAyOTguMzk4IDI0MS4zMDFDMzAwLjM0NSAyMzkuMDk1IDMwMS4zMTggMjM1LjMzMSAzMDEuMzE4IDIzMC4wMDlDMzAxLjMxOCAyMjQuNjg4IDMwMC4zNDUgMjIwLjkyNCAyOTguMzk4IDIxOC43MTdDMjk2LjQ1MSAyMTYuNTExIDI5My4yMzkgMjE1LjQwOCAyODguNzYxIDIxNS40MDhDMjg0LjM0OCAyMTUuNDA4IDI4MS4xNjggMjE2LjUxMSAyNzkuMjIxIDIxOC43MTdDMjc3LjI3NSAyMjAuOTI0IDI3Ni4zMDEgMjI0LjY4OCAyNzYuMzAxIDIzMC4wMDlaIiBmaWxsPSIjMUUxRTFFIi8+CjxwYXRoIGQ9Ik0yNTAuNjUxIDE4OS42MTJIMjY1LjU0NUwyNDMuODM3IDI1NC4zNDVIMjIyLjEzTDIwMC40MjIgMTg5LjYxMkgyMTUuNzA1TDIzMC4wMTQgMjMyLjA1NEMyMzEuMzc3IDIzNi4yNzIgMjMyLjQxNSAyMzkuODQxIDIzMy4xMjkgMjQyLjc2MUMyMzQuMjk3IDIzOC4zNDkgMjM1LjMzNiAyMzQuNzc5IDIzNi4yNDQgMjMyLjA1NEwyNTAuNjUxIDE4OS42MTJaIiBmaWxsPSIjMUUxRTFFIi8+CjxwYXRoIGQ9Ik0xODYuMDA0IDI1NC4zNDVDMTc5LjMyIDI1NC4zNDUgMTc0LjY0NyAyNTIuOTUgMTcxLjk4NiAyNTAuMTU5QzE2OS4zOTEgMjQ3LjMwNCAxNjguMDkzIDI0Mi44NTkgMTY4LjA5MyAyMzYuODIzVjIxNi41NzZIMTU5LjIzNFYyMDkuNjY0TDE2OS4yNjEgMjA1LjU3NkwxNzUuMTk5IDE5NC4wODlIMTgyLjQ5OVYyMDUuNjczSDE5Ni41MTdWMjE2LjU3NkgxODIuNDk5VjI0Mi44NThIMTk1LjE1NFYyNTQuMzQ1SDE4Ni4wMDRaIiBmaWxsPSIjMUUxRTFFIi8+CjxwYXRoIGQ9Ik0xMzIuOTYyIDI0NS45NzNDMTM1Ljk0NyAyNDUuOTczIDEzOC4zNDggMjQ1LjQyMiAxNDAuMTY1IDI0NC4zMTlDMTQxLjk4MiAyNDMuMTUxIDE0My4yNDggMjQxLjU5MyAxNDMuOTYyIDIzOS42NDZIMTU3Ljc4NEMxNTcuMDA2IDI0NC4yNTQgMTU0LjYwNSAyNDguMTE1IDE1MC41ODEgMjUxLjIzQzE0Ni42MjIgMjU0LjM0NSAxNDAuNjUyIDI1NS45MDMgMTMyLjY3IDI1NS45MDNDMTIzLjc3OSAyNTUuOTAzIDExNy4xOTIgMjUzLjQ2OSAxMTIuOTA5IDI0OC42MDJDMTA4LjYyNiAyNDMuNjcgMTA2LjQ4NCAyMzcuNDQgMTA2LjQ4NCAyMjkuOTEyQzEwNi40ODQgMjI1LjA0NSAxMDcuNDI1IDIyMC42NjQgMTA5LjMwNyAyMTYuNzdDMTExLjI1NCAyMTIuODc3IDExNC4xNzUgMjA5Ljc5NCAxMTguMDY4IDIwNy41MjNDMTIyLjAyNyAyMDUuMjUxIDEyNi44OTQgMjA0LjExNiAxMzIuNjcgMjA0LjExNkMxNDEuMzAxIDIwNC4xMTYgMTQ3LjY2MSAyMDYuNTE3IDE1MS43NDkgMjExLjMxOUMxNTUuODM4IDIxNi4xMjEgMTU3Ljg4MiAyMjIuMjg3IDE1Ny44ODIgMjI5LjgxNEMxNTcuODgyIDIzMS42OTYgMTU3LjgxNyAyMzIuOTk0IDE1Ny42ODcgMjMzLjcwOEgxMjAuNTk5QzEyMC45ODkgMjM4LjEyMSAxMjIuMjIyIDI0MS4yNjkgMTI0LjI5OCAyNDMuMTUxQzEyNi40NCAyNDUuMDMyIDEyOS4zMjggMjQ1Ljk3MyAxMzIuOTYyIDI0NS45NzNaTTEzMi44NjQgMjEzLjg1QzEyOS4yOTUgMjEzLjg1IDEyNi41MDUgMjE0LjY5NCAxMjQuNDkzIDIxNi4zODFDMTIyLjU0NiAyMTguMDY4IDEyMS4yODEgMjIwLjkyNCAxMjAuNjk3IDIyNC45NDdIMTQ0LjE1NkMxNDMuODk3IDIyMS4yNDggMTQyLjgyNiAyMTguNDkgMTQwLjk0NCAyMTYuNjczQzEzOS4xMjcgMjE0Ljc5MSAxMzYuNDM0IDIxMy44NSAxMzIuODY0IDIxMy44NVoiIGZpbGw9IiMxRTFFMUUiLz4KPHBhdGggZD0iTTY0LjEyMzUgMjU2QzU3LjI0NDYgMjU2IDUxLjUwMTMgMjU0LjUwNyA0Ni44OTM3IDI1MS41MjJDNDIuMjg2MSAyNDguNTM3IDM4Ljg0NjcgMjQ0LjQ4MSAzNi41NzUzIDIzOS4zNTRDMzQuMzY4OSAyMzQuMjI3IDMzLjI2NTYgMjI4LjQxOSAzMy4yNjU2IDIyMS45M0MzMy4yNjU2IDIxNS4zNzUgMzQuNDk4NiAyMDkuNTY3IDM2Ljk2NDcgMjA0LjUwNUMzOS40MzA3IDE5OS4zNzggNDMuMjU5NiAxOTUuMzU1IDQ4LjQ1MTIgMTkyLjQzNUM1My43MDc4IDE4OS40NDkgNjAuMjYyMyAxODcuOTU3IDY4LjExNDYgMTg3Ljk1N0M3OC40MzMxIDE4Ny45NTcgODYuMTU1NiAxOTAuMDY2IDkxLjI4MjQgMTk0LjI4NEM5Ni40MDkyIDE5OC41MDIgOTkuMjk3IDIwNC4yNDYgOTkuOTQ2IDIxMS41MTRIODQuOTU1MUM4NC41MDA4IDIwNy42ODUgODIuODc4NCAyMDQuNzMyIDgwLjA4NzkgMjAyLjY1NkM3Ny4yOTc0IDIwMC41NzkgNzMuMjczOCAxOTkuNTQxIDY4LjAxNzMgMTk5LjU0MUM2MS41Mjc3IDE5OS41NDEgNTYuNjkzIDIwMS4zOSA1My41MTMxIDIwNS4wODlDNTAuMzMzMiAyMDguNzIzIDQ4Ljc0MzMgMjE0LjM2OSA0OC43NDMzIDIyMi4wMjdDNDguNzQzMyAyMjkuNDkgNTAuMjM1OSAyMzUuMDcxIDUzLjIyMTEgMjM4Ljc3QzU2LjIwNjMgMjQyLjQ2OSA2MC45MTEyIDI0NC4zMTkgNjcuMzM1OSAyNDQuMzE5QzczLjMwNjMgMjQ0LjMxOSA3Ny42ODY4IDI0Mi45ODggODAuNDc3MyAyNDAuMzI4QzgzLjMzMjcgMjM3LjY2NyA4NS4wODQ5IDIzNC4wNjUgODUuNzMzOCAyMjkuNTIzSDYyLjY2MzRWMjE5Ljg4NUg5OS44NDg2VjI1NC4zNDVIODcuMTk0VjI0MS44ODVDODUuNzY2MyAyNDYuMTAzIDgzLjE3MDQgMjQ5LjUxIDc5LjQwNjUgMjUyLjEwNkM3NS42NDI1IDI1NC43MDIgNzAuNTQ4MiAyNTYgNjQuMTIzNSAyNTZaIiBmaWxsPSIjMUUxRTFFIi8+Cjwvc3ZnPgo=">
      <bpmn:extensionElements>
        <zeebe:properties>
          <zeebe:property name="inbound.type" value="io.camunda:webhook:1" />
          <zeebe:property name="inbound.method" value="post" />
          <zeebe:property name="inbound.context" value="getvocal-start-process" />
          <zeebe:property name="inbound.shouldValidateHmac" value="disabled" />
          <zeebe:property name="inbound.auth.type" value="NONE" />
          <zeebe:property name="consumeUnmatchedEvents" value="true" />
          <zeebe:property name="correlationRequired" value="notRequired" />
          <zeebe:property name="deduplicationModeManualFlag" value="false" />
          <zeebe:property name="deduplicationMode" value="AUTO" />
          <zeebe:property name="resultVariable" value="" />
          <zeebe:property name="resultExpression" value="={&#10;  customerRequest: request.body.customerRequest,&#10;  customerId: request.body.customerId,&#10;  conversationId: request.body.conversationId,&#10;  customerEmail: request.body.email&#10;}" />
        </zeebe:properties>
        <zeebe:ioMapping>
          <zeebe:output source="={&#10;    &#34;subject&#34;: &#34;Voice Request&#34;,&#10;    &#34;request&#34;: customerRequest,&#10;    &#34;originalMessageInFull&#34;: customerRequest,&#10;    &#34;communicationContext&#34;: {&#10;        &#34;channel&#34; : &#34;getVocal&#34;,&#10;        &#34;emailAddress&#34;: &#34;bernd.it.depends.ruecker@gmail.com&#34;,&#10;        &#34;conversationId&#34;: conversationId    }&#10;}" target="supportCase" />
        </zeebe:ioMapping>        
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_1rqop3e</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0vgf8tj" messageRef="Message_1qsv5s6" />
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="Flow_1rqop3e" sourceRef="Event_1s8cboy" targetRef="Gateway_0mwer7n" />
  </bpmn:process>
  <bpmn:message id="Message_16m9y1n" name="a79db208-bf8e-49fb-ba29-3748eab2954a" zeebe:modelerTemplate="io.camunda.connectors.inbound.EmailMessageStart.v1" />
  <bpmn:message id="Message_0pug44t" name="Chat" />
  <bpmn:message id="Message_3hatd6n" name="MSG_GetVocal" />
  <bpmn:message id="Message_026jxye" name="io.camunda.chat.message.2afef382-db76-4151-a6a3-079b58f0205f" zeebe:modelerTemplate="io.camunda.chat.messageStart.2afef382-db76-4151-a6a3-079b58f0205f.v1" />
  <bpmn:message id="Message_1qsv5s6" name="7815d82f-5770-4078-ae95-4d2bb4917682" zeebe:modelerTemplate="Template_0zt2ly0" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="banking-support-agent">
      <bpmndi:BPMNShape id="Activity_0qhv81v_di" bpmnElement="AI_CustomerSupportAgent" isExpanded="true">
        <dc:Bounds x="700" y="80" width="290" height="460" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04qwkmr_di" bpmnElement="CallActivity_AccountSupportAgent">
        <dc:Bounds x="860" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1jcnlqd_di" bpmnElement="CallActivity_LoanSupportAgent">
        <dc:Bounds x="740" y="130" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0osei79_di" bpmnElement="UserTask_HandleLegalQuestions">
        <dc:Bounds x="740" y="230" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1xr4dk0_di" bpmnElement="UserTask_HandleOtherInquiries">
        <dc:Bounds x="740" y="330" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0xdxj61_di" bpmnElement="Tool_A2A_CreditCardAgent">
        <dc:Bounds x="860" y="230" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1v0upkw_di" bpmnElement="Tool_AskCustomer">
        <dc:Bounds x="740" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0jhfldm" bpmnElement="Tool_InformCustomer">
        <dc:Bounds x="860" y="430" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1sbtuh2_di" bpmnElement="Gateway_1sbtuh2" isMarkerVisible="true">
        <dc:Bounds x="1245" y="285" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1242" y="240" width="55" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_13awtny_di" bpmnElement="Event_13awtny">
        <dc:Bounds x="1372" y="292" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1sx7tol_di" bpmnElement="Event_1sx7tol">
        <dc:Bounds x="1372" y="392" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1hwucx3_di" bpmnElement="Activity_04lvuy1">
        <dc:Bounds x="1220" y="370" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0bgxirs_di" bpmnElement="StartEvent_Email">
        <dc:Bounds x="182" y="142" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="161" y="185" width="78" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1vc8nnq_di" bpmnElement="Activity_1mu0kb7">
        <dc:Bounds x="1080" y="270" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1q6r91a_di" bpmnElement="StartEvent_Blank">
        <dc:Bounds x="182" y="572" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="158" y="615" width="88" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0xy24su_di" bpmnElement="Event_0nn09te">
        <dc:Bounds x="182" y="342" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="159" y="385" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_15hyfoa_di" bpmnElement="Task_LoadCustomerMasterData">
        <dc:Bounds x="550" y="270" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0mwer7n_di" bpmnElement="Gateway_0mwer7n" isMarkerVisible="true">
        <dc:Bounds x="455" y="285" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="454" y="246" width="52" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0u2k6do_di" bpmnElement="StartEvent_Chat">
        <dc:Bounds x="182" y="242" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="157" y="285" width="89" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="BPMNShape_0shrxp6" bpmnElement="Task_ChatThinkingUpdate">
        <dc:Bounds x="270" y="220" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0rgli93_di" bpmnElement="Event_1s8cboy">
        <dc:Bounds x="182" y="432" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="158" y="475" width="85" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_1nojswc_di" bpmnElement="Flow_1nojswc">
        <di:waypoint x="990" y="310" />
        <di:waypoint x="1080" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xnx5gq_di" bpmnElement="Flow_0xnx5gq">
        <di:waypoint x="1180" y="310" />
        <di:waypoint x="1245" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0g2kbqn_di" bpmnElement="Flow_0g2kbqn">
        <di:waypoint x="1270" y="335" />
        <di:waypoint x="1270" y="370" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1279" y="342" width="43" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19tm0v8_di" bpmnElement="Flow_19tm0v8">
        <di:waypoint x="1295" y="310" />
        <di:waypoint x="1372" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1311" y="292" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1w8zj7s_di" bpmnElement="Flow_1w8zj7s">
        <di:waypoint x="1320" y="410" />
        <di:waypoint x="1372" y="410" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1i0kcwv_di" bpmnElement="Flow_1i0kcwv">
        <di:waypoint x="218" y="260" />
        <di:waypoint x="270" y="260" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fv4284_di" bpmnElement="Flow_0fv4284">
        <di:waypoint x="650" y="310" />
        <di:waypoint x="700" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hmpbzz_di" bpmnElement="Flow_1hmpbzz">
        <di:waypoint x="505" y="310" />
        <di:waypoint x="550" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="520" y="292" width="17" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_09odqrt_di" bpmnElement="Flow_09odqrt">
        <di:waypoint x="480" y="335" />
        <di:waypoint x="480" y="390" />
        <di:waypoint x="700" y="390" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="493" y="353" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0l0i2vg_di" bpmnElement="Flow_0l0i2vg">
        <di:waypoint x="370" y="260" />
        <di:waypoint x="420" y="260" />
        <di:waypoint x="420" y="310" />
        <di:waypoint x="455" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18e2jyj_di" bpmnElement="Flow_18e2jyj">
        <di:waypoint x="218" y="360" />
        <di:waypoint x="420" y="360" />
        <di:waypoint x="420" y="310" />
        <di:waypoint x="455" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04dj9kf_di" bpmnElement="Flow_04dj9kf">
        <di:waypoint x="218" y="590" />
        <di:waypoint x="420" y="590" />
        <di:waypoint x="420" y="310" />
        <di:waypoint x="455" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_17hp3tr_di" bpmnElement="Flow_17hp3tr">
        <di:waypoint x="218" y="160" />
        <di:waypoint x="420" y="160" />
        <di:waypoint x="420" y="310" />
        <di:waypoint x="455" y="310" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rqop3e_di" bpmnElement="Flow_1rqop3e">
        <di:waypoint x="218" y="450" />
        <di:waypoint x="420" y="450" />
        <di:waypoint x="420" y="310" />
        <di:waypoint x="455" y="310" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
